## 오늘의 목차

* 자바스크립트의 함수
1. 함수란 무엇이냐?
2. 함수를 정의하는 방법 4가지
3. 다양한 함수(뭐가 다양한겨? 함수 정의? 함수 사용?)
4. 함수를 만들 때 주의할 점.
5. 정리

* 공부 후기

* 질문거리

***

## 자바스크립트의 함수

함수.. 정말 중요한 개념.

모르거나 헷갈리는 파트만 딱딱 찝어서 정리해두자.

***

### 1. 함수란 무엇이냐?

js에서 함수란 `작업을 수행하거나 값을 계산하는 등 일련의 과정을, 하나의 블록으로 감싸 실행단위로 만들어둔 것`이다!!

리액트의, 컴포넌트를 만드는 함수도 js와 같은 방식으로 선언하고 표현한다. 다만 js의 일반 함수와 리액트의 함수형 컴포넌트는 호출하는 방식에서 조금 다르다.

1. js 호출 방식: `printName("hongjw")` 
2. 함수형 컴포넌트 호출 방식: `<Component name="hongjw"/>` 물론 일반 js 문법으로 컴포넌트를 호출할 수도 있긴 함.


### 2. 함수를 정의하는 방법 4가지

함수를 선언하는 방식 4가지는 `함수 선언문`, `함수 표현식`, `function 생성자`, `화살표 함수` 정도가 있다.

#### (1) 함수 선언문

* 참고로 함수 선언문은 표현식(어떠한 값을 도출하는 구문)이 아니라, `state, 문` 으로 분류된다. 함수 선언 자체만으론 아무런 값도 도출하지 않기 때문. 물론 js의 특성때문에 함수라는 객체 자체를 변수에 할당하는 함수 표현식 방법이 있기 때문에, 함수를 선언하는 코드가 무조건 문이라고 해석할 순 없다.

```js
function printName(firstName, lastName){
  return firstName + lastName;
}
```

#### (2) 함수 표현식

js는 함수를 일급 객체로 바라보는 함수형 프로그래밍 언어이다. `일급 객체` 란 `다른 객체들에 일반적으로 적용 가능한 연산을 모두 지원하는 객체` 를 의미한다. >> 이게 뭔 소리? 애초에 모든 객체는 이런 작용을 하는 게 아닌가? >> 해서 챗지피티를 찾아봤더니 `js에선 애초에 객체와 일급 객체를 구분하지 않으며, 함수를 포함한 모든 객체는 일급 객체로 간주된다` 라고 대답하는군...

그렇다고 `객체`와 `일급 객체` 가 같은 단어라는 건 아니다.

애초에 객체라는 개념밖에 없었는데, js 같이 함수를 객체로 따지는 경우를 구분 짓기 위해 일급 객체라는 개념이 생겨난듯.

그니까 객체라는 집합 안에 일급 객체가 부분집합으로 있는 것.

> 챗지피티 왈. 객체"라는 용어 자체는 더 광범위하고 클래스의 인스턴스를 포함하며 반드시 일류 상태를 의미하지는 않습니다.

하여튼... js에선 함수를 객체로 보기 때문에 함수를 변수에 할당할 수 있다. 이렇게 변수에 함수를 할당하는 방식을 `함수 표현식` 이라 한다.

**잠깐~~ 그럼 함수 선언식과 표현식의 차이는???** 

함수 선언식을 사용하면, `함수 호이스팅`이 발생한다. 함수 선언문이 미리 메모리에 등록되어 코드 순서 상관없이 함수를 호출할 수 있게 된다.

반면 함수 표현식은 변수에 할당하는 방식이다. 변수도 호이스팅이 일어나지만!!! 호이스팅되는 것은 변수 선언부일 뿐이다. 변수 할당부인 함수 파트는 호이스팅되지 않아 할당문 실행 전에는 함수를 호출할 수 없다.

#### (3) function 생성자

함수를 function 생성자를 활용해 선언하는 방식도 있다. class가 아니라 오로지 함수만을 위해 생성자를 쓰는 방식으로, 안티패턴이다.

그냥 예시만 보자면...
```js
const add = new Function('a', 'b', `return a+b`);
```

신기하긴 하네..


#### (4) 화살표 함수

최신 문법으로 등장한 화살표 함수. 타이핑 수가 줄어 좋긴 한데, 일반적인 함수 생성 방식과는 다른 점이 좀 있다.

1. 화살표 함수로 생성자 함수를 만들 수는 없다.
```js
// 이건 가능.
function Car(name, color){
  this.name = name;
  this.color = color;
}

// 이건 불가능.
const Car = (name, color) => {
  this.name = name;
  this.color = color;
}
```

2. 화살표 함수로는 arguments를 받을 순 없다. (물론  rest는 받아지니까 rest 쓰면 되긴 됨!!)

3. this 바인딩이 일반 함수와는 좀 다르다. 
```js
const Car = {
  name: "a",
  printThis(){
    console.log("메소드의 this:", this);
  },
  printArrowThis: ()=>{
    console.log("화살표 함수의 this: ", this);
  }
}

console.log("전역 환경의 this", this)
Car.printThis();
Car.printArrowThis();
```
위의 예시에서 printThis는 메소드로 호출되어 Car 객체를 가리킴.
반면 printArrowThis는 자체 바인딩이 없어 상위 스코프인 전역 객체를 가리킴. (**겁나 중요한 거..!! 사실 나는 printArrowThis가 상위 this를 상속받아야 하니 Car 객체를 가리킬 거라 생각했는데, 자꾸 전역 객체를 가리키는 것이다. 왜 이런가 생각해봤는데 Car 은 함수가 아니라 객체라 this가 내부에 없다. this 객체는 `함수`가 실행될 때 함수 내부로 전달되는 (혹은 생성되는) 객체임. **)

![alt text](image.png)

하여간, this를 사용할 때엔 화살표 함수를 쓸지 일반 함수를 쓸지 조심해야 한다.


### 3. 다양한 함수 (함수 선언 방식 말고, 이번엔 함수를 사용하는 방법에 대해 여러 가지를 알아보자.)

앞에서 배운 함수들은 그냥 여러 번 쓰고 싶으면 일반적인 인자 넣고 여러 번 호출하는 일반적인 함수 케이스다.

이번에는 특이하게 사용되는 함수를 보자.

1. 즉시 실행함수 IIFE

함수가 정의되는 그 순간 실행되는 함수. 재호출이 불가능해 무기명으로 만든다. 
이런 IIFE는 글로벌 스코프를 오염시키지 않고 독립적인 함수 스코프를 운영할 수 있단 장점이 있다. (IIFE 내부 변수는 외부에서 접근 못하게 막기 때문임.) 또한 딱 한 번만 실행된다는 점을 가시적으로 보여줘 코드 읽는 데에 유용하다.

2. 고차 함수 HOC. higher order function

함수가 객체 취급되다보니 함수를 인자로 받을 수도 있다.

예전에 본 적 있는 HOC 패턴... 리액트에선 Hook이 들어오면서 점점 줄어드는 추세라고는 하는데..

어쨌든 나중에 3장에서 다시 공부하자.


### 4. 함수를 만들 때 주의할 점.

> 1. 함수의 `부수 효과, side effect`를 최대한 억제해야 한다.

함수 외부에 영향을 미치는 (즉 전역 변수를 조작하거나 참조하는) 함수는 부수 효과가 있는, `비순수 함수` 라고 한다. 반면 함수 외부에 영향을 미치지도 않고 영향 받지도 않아 오로지 인자에 의해서만 늘 동일한 결과를 내뱉는 함수를 `순수 함수` 라고 한다.

순수 효과는 언제나 결과가 동일하여 예측 가능하고 안정적이다.

비순수 함수도 어쩔 수 없이 써야 하긴 하지만!! 리액트 관점에서 부수 효과를 처리하는 훅인 `useEffect`를 최대한 줄이는 것이 함수의 역할을 좁히고 버그를 줄이는 방법이다. 

> 2. 함수를 가능한 한 작게 만들자.

`ESlint` 에는 `max-lines-per-function` 이라는 규칙이 있는데, 이 규칙은 기본 50줄이 넘어가면 그 함수는 과도하게 커진 함수로 분류하고 경고 메세지를 준다.

줄 수만으론 함수가 얼마나 일을 하는지 모두 체크할 순 없겠지만, 여튼 요점은 함수가 너무 많은 일을 지 혼자 안 하게끔 하는 것이다!!

> 3. 누구나 이해할 수 있는 이름을 붙여라.

다 아는 얘기. 네이밍 좀 잘 하자. 


### 5. 정리

함수의 선언 방식, `함수 선언문` `함수 표현식` `화살표 함수` `생성자 함수를 통한 함수 생성` 이 4가지를 살펴봤다.

* 함수 선언문과 함수 표현식 : 호이스팅 관점에서 비교해볼 수 있다.
* 함수 선언문과 화살표 함수 : this 바인딩 관점에서 비교해볼 수 있다.

그리고 `즉시 실행 함수`, `고차 함수`도 가볍게 훑어봤다.

함수는 무궁무진하기 때문에 꼼꼼히 복습하자.

***

## 공부 후기

하.. 다른 건 다 괜찮든데, this binding이 너무 어렵다. 이해 좀 될라 하면 이상한데서 또 막히고...

***

## 질문거리

